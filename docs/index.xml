<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Daaihang Wong Online – 文档</title><link>https://wdh.hk/docs/</link><description>Recent content in 文档 on Daaihang Wong Online</description><generator>Hugo -- gohugo.io</generator><language>zh-CN</language><copyright>© 2019 - 2024 Daaihang Wong Online</copyright><lastBuildDate>Sun, 10 Mar 2024 00:14:50 +0800</lastBuildDate><atom:link href="https://wdh.hk/docs/index.xml" rel="self" type="application/rss+xml"/><item><title>使用Netlity加速Github Page</title><link>https://wdh.hk/docs/netlity/</link><pubDate>Sat, 16 Mar 2024 18:22:49 +0800</pubDate><guid>https://wdh.hk/docs/netlity/</guid><description>
&lt;p>使用Github Page构建静态网页可以大大降低网页部署成本。虽然Github设有CDN加速节点，但在大陆仍然加载较慢。可以使用Netlity加速访问，提升Github Page的国内使用体验。&lt;/p>
&lt;img src="https://cdn.jsdelivr.net/gh/daaihang/PicGo/202301310127745.png" alt="image-20230131012454959" style="zoom:33%;" />
&lt;p>加速后本网站实测结果（用了很多网站测试，测速结果基本一致）：&lt;/p>
&lt;img src="https://cdn.jsdelivr.net/gh/daaihang/PicGo/202301310130655.png" alt="" style="zoom: 33%;" />
&lt;img src="https://cdn.jsdelivr.net/gh/daaihang/PicGo/202301310157035.png" alt="" style="zoom: 33%;" />
&lt;div class="hx-overflow-x-auto hx-mt-6 hx-flex hx-rounded-lg hx-border hx-py-2 ltr:hx-pr-4 rtl:hx-pl-4 contrast-more:hx-border-current contrast-more:dark:hx-border-current hx-border-blue-200 hx-bg-blue-100 hx-text-blue-900 dark:hx-border-blue-200/30 dark:hx-bg-blue-900/30 dark:hx-text-blue-200">
&lt;div class="ltr:hx-pl-3 ltr:hx-pr-2 rtl:hx-pr-3 rtl:hx-pl-2">&lt;div class="hx-select-none hx-text-xl" style="font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">
ℹ️
&lt;/div>&lt;/div>
&lt;div class="hx-w-full hx-min-w-0 hx-leading-7">
&lt;div class="hx-mt-6 hx-leading-7 first:hx-mt-0">
&lt;p>&lt;strong>更多测速结果&lt;/strong>&lt;/p>
&lt;img src="https://cdn.jsdelivr.net/gh/daaihang/PicGo/202301310204970.png" style="zoom:33%;" />
&lt;img src="https://cdn.jsdelivr.net/gh/daaihang/PicGo/202301310206217.png" style="zoom:33%;" />
&lt;img src="https://cdn.jsdelivr.net/gh/daaihang/PicGo/202301310207495.png" style="zoom:33%;" />
&lt;img src="https://cdn.jsdelivr.net/gh/daaihang/PicGo/202301310212887.png" style="zoom:33%;" />
&lt;/div>
&lt;/div>
&lt;/div>
&lt;div class="hx-overflow-x-auto hx-mt-6 hx-flex hx-rounded-lg hx-border hx-py-2 ltr:hx-pr-4 rtl:hx-pl-4 contrast-more:hx-border-current contrast-more:dark:hx-border-current hx-border-blue-200 hx-bg-blue-100 hx-text-blue-900 dark:hx-border-blue-200/30 dark:hx-bg-blue-900/30 dark:hx-text-blue-200">
&lt;div class="ltr:hx-pl-3 ltr:hx-pr-2 rtl:hx-pr-3 rtl:hx-pl-2">&lt;div class="hx-select-none hx-text-xl" style="font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">
ℹ️
&lt;/div>&lt;/div>
&lt;div class="hx-w-full hx-min-w-0 hx-leading-7">
&lt;div class="hx-mt-6 hx-leading-7 first:hx-mt-0">
在构建过程中，本网站使用Cloudflare解析域名并加速，使用Netlity再次加速Github Page。因此本网站（旧版本，版本更新见&lt;a href="https://wdh.hk/about" >关于&lt;/a>）是Cloudflare、Netlity和Github Page三方加速的结果。&lt;strong>但在我部署前后的加速仍然比较明显&lt;/strong>。
&lt;/div>
&lt;/div>
&lt;/div>
&lt;h2>绑定仓库&lt;span class="hx-absolute -hx-mt-20" id="绑定仓库">&lt;/span>
&lt;a href="#%e7%bb%91%e5%ae%9a%e4%bb%93%e5%ba%93" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>前面的基础信息自行选择，并起一个用户名。只需要填框内两个项目，其他选项可不填写。&lt;/p>
&lt;img src="https://cdn.jsdelivr.net/gh/daaihang/PicGo/202301310238656.png" alt="" style="zoom:50%;" />
&lt;p>选择&lt;code>Import from Git&lt;/code>，以导入Github上的仓库。&lt;/p>
&lt;img src="https://cdn.jsdelivr.net/gh/daaihang/PicGo/202301310240296.png" alt="" style="zoom:50%;" />
&lt;img src="https://cdn.jsdelivr.net/gh/daaihang/PicGo/202301310242126.png" style="zoom:50%;" />
&lt;p>登入Github账号后，选择需要构建的仓库&lt;code>&amp;lt;username&amp;gt;.github.io&lt;/code>。&lt;/p>
&lt;img src="https://cdn.jsdelivr.net/gh/daaihang/PicGo/202301310318721.png" style="zoom:50%;" />
&lt;p>选择了需要的分支后点击&lt;code>Deploy site&lt;/code>。&lt;/p>
&lt;img src="https://cdn.jsdelivr.net/gh/daaihang/PicGo/202301310248008.png" style="zoom:50%;" />
&lt;h2>添加自定义域名&lt;span class="hx-absolute -hx-mt-20" id="添加自定义域名">&lt;/span>
&lt;a href="#%e6%b7%bb%e5%8a%a0%e8%87%aa%e5%ae%9a%e4%b9%89%e5%9f%9f%e5%90%8d" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>完成后在&lt;code>Domains&lt;/code>选项卡中点击&lt;code>Add custom domain&lt;/code>添加自定义域名。并在域名解析服务商填写解析。&lt;/p>
&lt;img src="https://cdn.jsdelivr.net/gh/daaihang/PicGo/202301310251539.png" style="zoom:50%;" />
&lt;img src="https://cdn.jsdelivr.net/gh/daaihang/PicGo/202301310252712.png" style="zoom:50%;" />
&lt;p>添加后后添加两个域名，需要分别设置。点击&lt;code>Check DNS configuration&lt;/code>选项，查看需要CNAME的域名。&lt;/p>
&lt;img src="https://cdn.jsdelivr.net/gh/daaihang/PicGo/202301310255259.png" style="zoom:50%;" />
&lt;p>复制框内的二级域名或IP地址，在域名解析商设置解析。&lt;/p>
&lt;img src="https://cdn.jsdelivr.net/gh/daaihang/PicGo/202301310302886.png" style="zoom:50%;" />
&lt;p>例如，我在Cloudflare解析域名，那我就在此处添加记录，解析上面两个域名。注意需要分开解析&lt;code>example.com&lt;/code>和&lt;code>www.example.com&lt;/code>域名，解析类型为CNAME。&lt;/p>
&lt;img src="https://cdn.jsdelivr.net/gh/daaihang/PicGo/202301310307898.png" style="zoom:50%;" />
&lt;h2>设置HTTPS&lt;span class="hx-absolute -hx-mt-20" id="设置https">&lt;/span>
&lt;a href="#%e8%ae%be%e7%bd%aehttps" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>完成解析后在下方选项启用HTTPS，安全访问网站。（此时截图还没验证完成，验证成功后可以启用。）&lt;/p>
&lt;img src="https://cdn.jsdelivr.net/gh/daaihang/PicGo/202301310314163.png" style="zoom:50%;" />
&lt;h2>最后&lt;span class="hx-absolute -hx-mt-20" id="最后">&lt;/span>
&lt;a href="#%e6%9c%80%e5%90%8e" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>
&lt;div class="hx-overflow-x-auto hx-mt-6 hx-flex hx-rounded-lg hx-border hx-py-2 ltr:hx-pr-4 rtl:hx-pl-4 contrast-more:hx-border-current contrast-more:dark:hx-border-current hx-border-blue-200 hx-bg-blue-100 hx-text-blue-900 dark:hx-border-blue-200/30 dark:hx-bg-blue-900/30 dark:hx-text-blue-200">
&lt;div class="ltr:hx-pl-3 ltr:hx-pr-2 rtl:hx-pr-3 rtl:hx-pl-2">&lt;div class="hx-select-none hx-text-xl" style="font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">
ℹ️
&lt;/div>&lt;/div>
&lt;div class="hx-w-full hx-min-w-0 hx-leading-7">
&lt;div class="hx-mt-6 hx-leading-7 first:hx-mt-0">
&lt;h3>推荐网站：&lt;a href="https://pagespeed.web.dev/" target="_blank" rel="noopener">PageSpeed Insights&lt;/a>&lt;span class="hx-absolute -hx-mt-20" id="推荐网站pagespeed-insightshttpspagespeedwebdev">&lt;/span>
&lt;a href="#%e6%8e%a8%e8%8d%90%e7%bd%91%e7%ab%99pagespeed-insightshttpspagespeedwebdev" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>这个网站为谷歌旗下网站分析的网站，可以分析网站的优缺点，提出优化建议。例如采用新一代格式提供图片、适当调整图片大小、移除阻塞渲染的资源。这些建议可以帮助提高网页加载速度。同时还给出无障碍设计建议、安全建议和SEO优化建议，谷歌还是很给力的😘。&lt;/p>
&lt;img src="https://cdn.jsdelivr.net/gh/daaihang/PicGo/202301310324195.png" style="zoom:50%;" />
&lt;/div>
&lt;/div>
&lt;/div>
&lt;p>在国内使用Github Page还是比较累人的。网络环境让我们没法好好使用这个功能。但花些时间捣鼓捣鼓就可以有比较好的体验。关键还不用花钱。虽然Page服务没法弄数据库，但对个人博客来说已经够用了。&lt;/p></description></item><item><title>Ubuntu 20.04 安装 MongoDB 7.0</title><link>https://wdh.hk/docs/ubuntu-mongodb/</link><pubDate>Sat, 16 Mar 2024 15:40:12 +0800</pubDate><guid>https://wdh.hk/docs/ubuntu-mongodb/</guid><description>
&lt;h2>添加MongoDB 7.0存储库&lt;span class="hx-absolute -hx-mt-20" id="添加mongodb-70存储库">&lt;/span>
&lt;a href="#%e6%b7%bb%e5%8a%a0mongodb-70%e5%ad%98%e5%82%a8%e5%ba%93" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>更新 APT 包索引：&lt;/p>
&lt;div class="code-block hx-relative hx-mt-6 first:hx-mt-0 group/code">&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">sudo apt update -y&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="code-copy-btn group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>安装所有必需的软件包：&lt;/p>
&lt;div class="code-block hx-relative hx-mt-6 first:hx-mt-0 group/code">&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">sudo apt install wget curl gnupg2 software-properties-common apt-transport-https ca-certificates lsb-release vim&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="code-copy-btn group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>接下来，导入 MongoDB 7.0 存储库的 GPG 密钥：&lt;/p>
&lt;div class="code-block hx-relative hx-mt-6 first:hx-mt-0 group/code">&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">curl -fsSL https://pgp.mongodb.com/server-7.0.asc &lt;span class="p">|&lt;/span>sudo gpg --dearmor -o /etc/apt/trusted.gpg.d/mongodb-server-7.0.gpg&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="code-copy-btn group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>在 Ubuntu 22.04 上添加 MongoDB 7.0 的存储库：&lt;/p>
&lt;div class="code-block hx-relative hx-mt-6 first:hx-mt-0 group/code">&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">echo&lt;/span> &lt;span class="s2">&amp;#34;deb [ arch=amd64,arm64 ] https://repo.mongodb.org/apt/ubuntu &lt;/span>&lt;span class="k">$(&lt;/span>lsb_release -cs&lt;span class="k">)&lt;/span>&lt;span class="s2">/mongodb-org/7.0 multiverse&amp;#34;&lt;/span> &lt;span class="p">|&lt;/span> sudo tee /etc/apt/sources.list.d/mongodb-org-7.0.list&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="code-copy-btn group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;h2>安装MongoDB 7.0包&lt;span class="hx-absolute -hx-mt-20" id="安装mongodb-70包">&lt;/span>
&lt;a href="#%e5%ae%89%e8%a3%85mongodb-70%e5%8c%85" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>添加存储库后，使用以下命令更新包索引并安装 MongoDB 7.0：&lt;/p>
&lt;div class="code-block hx-relative hx-mt-6 first:hx-mt-0 group/code">&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">sudo apt update &lt;span class="o">&amp;amp;&amp;amp;&lt;/span> sudo apt install mongodb-org -y&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="code-copy-btn group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>启动并启用服务：&lt;/p>
&lt;div class="code-block hx-relative hx-mt-6 first:hx-mt-0 group/code">&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">sudo systemctl &lt;span class="nb">enable&lt;/span> --now mongod&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="code-copy-btn group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>验证服务是否启动：&lt;/p>
&lt;div class="code-block hx-relative hx-mt-6 first:hx-mt-0 group/code">&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">systemctl status mongod&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="code-copy-btn group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>验证安装的 MongoDB 版本：&lt;/p>
&lt;div class="code-block hx-relative hx-mt-6 first:hx-mt-0 group/code">&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">mongod --version&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="code-copy-btn group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;h2>配置MongoDB 7.0&lt;span class="hx-absolute -hx-mt-20" id="配置mongodb-70">&lt;/span>
&lt;a href="#%e9%85%8d%e7%bd%aemongodb-70" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>MongoDB 将其配置文件存储在 /etc/mongod.conf 中。在该文件中，可以对 MongoDB 进行所有所需的配置，包括数据库路径、日志目录等。&lt;/p>
&lt;p>以下是我们可以为 MongoDB 7.0 进行的一些设置。都需要打开文件进行编辑：&lt;/p>
&lt;div class="code-block hx-relative hx-mt-6 first:hx-mt-0 group/code">&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">sudo vim /etc/mongod.conf&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="code-copy-btn group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;h3>启用密码验证&lt;span class="hx-absolute -hx-mt-20" id="启用密码验证">&lt;/span>
&lt;a href="#%e5%90%af%e7%94%a8%e5%af%86%e7%a0%81%e9%aa%8c%e8%af%81" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>要在 MongoDB 7.0 上启用密码身份验证，请取消配置中以下行的注释：&lt;/p>
&lt;p>security:
authorization: enabled&lt;/p>
&lt;h3>启用远程访问&lt;span class="hx-absolute -hx-mt-20" id="启用远程访问">&lt;/span>
&lt;a href="#%e5%90%af%e7%94%a8%e8%bf%9c%e7%a8%8b%e8%ae%bf%e9%97%ae" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>为了允许远程访问数据库，我们需要将其设置为绑定到所有接口，而不仅仅是本地主机。为此，请进行以下修改：&lt;/p>
&lt;div class="code-block hx-relative hx-mt-6 first:hx-mt-0 group/code">&lt;pre>&lt;code># network interfaces
net:
port: 27017
bindIp: 0.0.0.0 # Enter 0.0.0.0,:: to bind to all IPv4 and IPv6 addresses or, alternatively, use the net.bindIpAll setting.&lt;/code>&lt;/pre>&lt;div class="hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="code-copy-btn group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>设置完成后，保存配置并重新启动服务：&lt;/p>
&lt;div class="code-block hx-relative hx-mt-6 first:hx-mt-0 group/code">&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">sudo systemctl restart mongod&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="code-copy-btn group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>如果启用了服务器的防火墙，请允许该服务通过。云服务器厂商通常关闭服务器内部的防火墙，并由云服务器控制台统一管理。&lt;/p>
&lt;div class="code-block hx-relative hx-mt-6 first:hx-mt-0 group/code">&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">sudo ufw allow &lt;span class="m">27017&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="code-copy-btn group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;h2>使用MongoDB 7.0数据库&lt;span class="hx-absolute -hx-mt-20" id="使用mongodb-70数据库">&lt;/span>
&lt;a href="#%e4%bd%bf%e7%94%a8mongodb-70%e6%95%b0%e6%8d%ae%e5%ba%93" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>要连接到 MongoDB shell，请使用：&lt;code>mongosh&lt;/code>命令。&lt;/p>
&lt;p>示例输出：&lt;/p>
&lt;div class="code-block hx-relative hx-mt-6 first:hx-mt-0 group/code">&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">Current Mongosh Log ID: 64eb1de75716266ec1174a00
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Connecting to: mongodb://127.0.0.1:27017/?directConnection&lt;span class="o">=&lt;/span>true&lt;span class="p">&amp;amp;&lt;/span>&lt;span class="nv">serverSelectionTimeoutMS&lt;/span>&lt;span class="o">=&lt;/span>2000&lt;span class="p">&amp;amp;&lt;/span>&lt;span class="nv">appName&lt;/span>&lt;span class="o">=&lt;/span>mongosh+1.10.6
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Using MongoDB: 7.0.0
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Using Mongosh: 1.10.6
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">For mongosh info see: https://docs.mongodb.com/mongodb-shell/
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">To &lt;span class="nb">help&lt;/span> improve our products, anonymous usage data is collected and sent to MongoDB periodically &lt;span class="o">(&lt;/span>https://www.mongodb.com/legal/privacy-policy&lt;span class="o">)&lt;/span>.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">You can opt-out by running the disableTelemetry&lt;span class="o">()&lt;/span> command.
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">test&amp;gt; &lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="code-copy-btn group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;h3>在 MongoDB 上创建用户&lt;span class="hx-absolute -hx-mt-20" id="在-mongodb-上创建用户">&lt;/span>
&lt;a href="#%e5%9c%a8-mongodb-%e4%b8%8a%e5%88%9b%e5%bb%ba%e7%94%a8%e6%88%b7" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>将通过创建一个名为 testuser 的示例用户来进行测试。我们还将为用户分配管理员角色：&lt;/p>
&lt;div class="code-block hx-relative hx-mt-6 first:hx-mt-0 group/code">&lt;pre>&lt;code>use admin
db.createUser(
{
user: &amp;#34;testuser&amp;#34;,
pwd: passwordPrompt(), // or cleartext password
roles: [ { role: &amp;#34;userAdminAnyDatabase&amp;#34;, db: &amp;#34;admin&amp;#34; }, &amp;#34;readWriteAnyDatabase&amp;#34; ]
}
)&lt;/code>&lt;/pre>&lt;div class="hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="code-copy-btn group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>为用户设置所需的密码，然后使用&lt;code>exit&lt;/code>命令退出。&lt;/p>
&lt;p>我们将通过使用用户连接来测试一切是否正常：&lt;/p>
&lt;div class="code-block hx-relative hx-mt-6 first:hx-mt-0 group/code">&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">mongosh -u testuser -p --authenticationDatabase admin&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="code-copy-btn group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;h3>创建数据库和集合&lt;span class="hx-absolute -hx-mt-20" id="创建数据库和集合">&lt;/span>
&lt;a href="#%e5%88%9b%e5%bb%ba%e6%95%b0%e6%8d%ae%e5%ba%93%e5%92%8c%e9%9b%86%e5%90%88" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>要在 MongoDB 上创建数据库，只需切换到一个不存在的数据库，如 testdb 所示：&lt;/p>
&lt;div class="code-block hx-relative hx-mt-6 first:hx-mt-0 group/code">&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-sh" data-lang="sh">&lt;span class="line">&lt;span class="cl">use testdb&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="code-copy-btn group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>输出：&lt;code>switched to db testdb&lt;/code>。&lt;/p>
&lt;p>现在可以在数据库中创建集合：&lt;/p>
&lt;div class="code-block hx-relative hx-mt-6 first:hx-mt-0 group/code">&lt;pre>&lt;code>db.employeedetails.insertOne(
{F_Name: &amp;#34;John&amp;#34;,
L_NAME: &amp;#34;Doe&amp;#34;,
ID_NO: &amp;#34;23245&amp;#34;,
AGE: &amp;#34;25&amp;#34;,
TEL: &amp;#34;63365467666&amp;#34;
}
)&lt;/code>&lt;/pre>&lt;div class="hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="code-copy-btn group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;h3>查看创建的集合&lt;span class="hx-absolute -hx-mt-20" id="查看创建的集合">&lt;/span>
&lt;a href="#%e6%9f%a5%e7%9c%8b%e5%88%9b%e5%bb%ba%e7%9a%84%e9%9b%86%e5%90%88" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;div class="code-block hx-relative hx-mt-6 first:hx-mt-0 group/code">&lt;pre>&lt;code>show collections&lt;/code>&lt;/pre>&lt;div class="hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="code-copy-btn group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div></description></item><item><title>使用小米路由器 4C 登录西邮联通校园网</title><link>https://wdh.hk/docs/mi4c-drcom/</link><pubDate>Mon, 11 Mar 2024 23:16:39 +0800</pubDate><guid>https://wdh.hk/docs/mi4c-drcom/</guid><description>
&lt;div class="hx-overflow-x-auto hx-mt-6 hx-flex hx-rounded-lg hx-border hx-py-2 ltr:hx-pr-4 rtl:hx-pl-4 contrast-more:hx-border-current contrast-more:dark:hx-border-current hx-border-blue-200 hx-bg-blue-100 hx-text-blue-900 dark:hx-border-blue-200/30 dark:hx-bg-blue-900/30 dark:hx-text-blue-200">
&lt;div class="ltr:hx-pl-3 ltr:hx-pr-2 rtl:hx-pr-3 rtl:hx-pl-2">&lt;div class="hx-select-none hx-text-xl" style="font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">
ℹ️
&lt;/div>&lt;/div>
&lt;div class="hx-w-full hx-min-w-0 hx-leading-7">
&lt;div class="hx-mt-6 hx-leading-7 first:hx-mt-0">
&lt;p>使用广东工业大学的OpenWrt刷机包。亲测可以直接在西安邮电大学长安校区使用（联通校园网），并解除联通校园网的设备使用数量限制。适合有多台设备的同学使用。&lt;/p>
&lt;p>参考文章：&lt;/p>
&lt;ul>
&lt;li>
&lt;p>⭐&lt;a href="https://github.com/shengqiangzhang/Drcom-GDUT-HC5661A-OpenWrt" target="_blank" rel="noopener">在Dr.COM下使用路由器上校园网WIFI&lt;/a>（若配置别的路由器则可以看这个Github项目）&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="https://www.right.com.cn/forum/thread-4040540-1-1.html" target="_blank" rel="noopener">开启telnet刷小米路由器&lt;/a>&lt;/p>
&lt;/li>
&lt;/ul>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;div class="hx-overflow-x-auto hx-mt-6 hx-flex hx-rounded-lg hx-border hx-py-2 ltr:hx-pr-4 rtl:hx-pl-4 contrast-more:hx-border-current contrast-more:dark:hx-border-current hx-border-yellow-100 hx-bg-yellow-50 hx-text-yellow-900 dark:hx-border-yellow-200/30 dark:hx-bg-yellow-700/30 dark:hx-text-yellow-200">
&lt;div class="ltr:hx-pl-3 ltr:hx-pr-2 rtl:hx-pr-3 rtl:hx-pl-2">&lt;div class="hx-select-none hx-text-xl" style="font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">
⚠️
&lt;/div>&lt;/div>
&lt;div class="hx-w-full hx-min-w-0 hx-leading-7">
&lt;div class="hx-mt-6 hx-leading-7 first:hx-mt-0">
本教程仅供学习，请在成功刷入OpenWrt后正确使用系统，并在学习后24小时内删除相关固件和（或）软件包。
&lt;/div>
&lt;/div>
&lt;/div>
&lt;h2>步骤提要&lt;span class="hx-absolute -hx-mt-20" id="步骤提要">&lt;/span>
&lt;a href="#%e6%ad%a5%e9%aa%a4%e6%8f%90%e8%a6%81" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;ol>
&lt;li>
&lt;p>初始化，简单进入系统。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>开启telnet和ftp，刷Breed，防止变砖。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>刷OpenWrt，配置网络和Dr.com。&lt;/p>
&lt;/li>
&lt;/ol>
&lt;h2>文件下载&lt;span class="hx-absolute -hx-mt-20" id="文件下载">&lt;/span>
&lt;a href="#%e6%96%87%e4%bb%b6%e4%b8%8b%e8%bd%bd" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;ul>
&lt;li>&lt;strong>MobaXterm&lt;/strong> &lt;a href="https://mobaxterm.mobatek.net/download-home-edition.html" target="_blank" rel="noopener">官网（MobaXterm Xserver）&lt;/a>，建议下载便携版本（Portable edition）。&lt;/li>
&lt;li>&lt;strong>R3GV2 patches&lt;/strong> &lt;a href="https://cntk-my.sharepoint.com/:u:/g/personal/599100706_mail_scun_net/EbfqzlpS8U9BhnNBz50mVLQBI98-6XU3NPFG0XlP7vJ63g?e=OZSheQ" target="_blank" rel="noopener">Onedrive链接&lt;/a>。&lt;/li>
&lt;li>&lt;strong>Breed&lt;/strong>（小米4C）&lt;a href="https://breed.hackpascal.net/breed-mt7688-reset38.bin" target="_blank" rel="noopener">下载链接&lt;/a>，其他路由器查看&lt;a href="https://github.com/shengqiangzhang/Drcom-GDUT-HC5661A-OpenWrt#%E4%B8%8B%E8%BD%BDbreed" target="_blank" rel="noopener">这里&lt;/a>的表格。&lt;/li>
&lt;li>&lt;strong>OpenWrt&lt;/strong>（小米4C）Github&lt;a href="https://github.com/shengqiangzhang/Drcom-GDUT-HC5661A-OpenWrt/files/8138729/Mi4C.zip" target="_blank" rel="noopener">下载链接&lt;/a>（内置了Dr.com插件及防检测插件）。&lt;/li>
&lt;li>（可选）自行安装OpenWrt其他软件包。&lt;/li>
&lt;/ul>
&lt;h2>前置步骤：进入系统配置密码&lt;span class="hx-absolute -hx-mt-20" id="前置步骤进入系统配置密码">&lt;/span>
&lt;a href="#%e5%89%8d%e7%bd%ae%e6%ad%a5%e9%aa%a4%e8%bf%9b%e5%85%a5%e7%b3%bb%e7%bb%9f%e9%85%8d%e7%bd%ae%e5%af%86%e7%a0%81" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>在校内无网情况下，路由器需要先配置WIFI密码才能进行后续步骤。否则无法用命令行登录小米路由器。&lt;/p>
&lt;p>路由器插入电源，手机或电脑搜索WIFI，找到名为&lt;code>Xiaomi_****&lt;/code>的无密码WIFI，直接连接。&lt;/p>
&lt;p>打开路由器默认配置界面（IP地址：&lt;a href="http://192.168.31.1" target="_blank" rel="noopener">192.168.31.1&lt;/a>），跳过拨号配置界面，直接设置WIFI密码（管理员密码默认于此相同，刷入Breed后该密码会被覆盖）。随后进入路由器主页，即可关闭网页。&lt;/p>
&lt;h2>在小米路由器4C上开启telnet和FTP&lt;span class="hx-absolute -hx-mt-20" id="在小米路由器4c上开启telnet和ftp">&lt;/span>
&lt;a href="#%e5%9c%a8%e5%b0%8f%e7%b1%b3%e8%b7%af%e7%94%b1%e5%99%a84c%e4%b8%8a%e5%bc%80%e5%90%aftelnet%e5%92%8cftp" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>解压R3GV2 patches包，双击运行&lt;code>0.start_main.bat&lt;/code>批处理文件，期间需要在cmd窗口输入你的路由器4C的管理员密码。结束后，路由器4C就可以用telnet远程登录和使用FTP上传下载文件了。&lt;/p>
&lt;div class="hx-overflow-x-auto hx-mt-6 hx-flex hx-rounded-lg hx-border hx-py-2 ltr:hx-pr-4 rtl:hx-pl-4 contrast-more:hx-border-current contrast-more:dark:hx-border-current hx-border-blue-200 hx-bg-blue-100 hx-text-blue-900 dark:hx-border-blue-200/30 dark:hx-bg-blue-900/30 dark:hx-text-blue-200">
&lt;div class="ltr:hx-pl-3 ltr:hx-pr-2 rtl:hx-pr-3 rtl:hx-pl-2">&lt;div class="hx-select-none hx-text-xl" style="font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">
ℹ️
&lt;/div>&lt;/div>
&lt;div class="hx-w-full hx-min-w-0 hx-leading-7">
&lt;div class="hx-mt-6 hx-leading-7 first:hx-mt-0">
原理大概是运用程序漏洞提权，获取root权限并开启FTP服务。
&lt;/div>
&lt;/div>
&lt;/div>
&lt;h2>用telnet登录到小米路由器4C&lt;span class="hx-absolute -hx-mt-20" id="用telnet登录到小米路由器4c">&lt;/span>
&lt;a href="#%e7%94%a8telnet%e7%99%bb%e5%bd%95%e5%88%b0%e5%b0%8f%e7%b1%b3%e8%b7%af%e7%94%b1%e5%99%a84c" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>在MobaXterm里新建一个session，类型telnet，主机地址为&lt;code>192.168.31.1&lt;/code>，用户为&lt;code>root&lt;/code>，密码空，就能登录路由器4C了。&lt;/p>
&lt;p>&lt;img src="https://cdn.jsdelivr.net/gh/daaihang/PicGo/202302211455225.png" alt="" loading="lazy" />&lt;/p>
&lt;p>&lt;img src="https://cdn.jsdelivr.net/gh/daaihang/PicGo/202302211458021.png" alt="" loading="lazy" />&lt;/p>
&lt;p>&lt;img src="https://cdn.jsdelivr.net/gh/daaihang/PicGo/202302211459646.png" alt="命令行出现root@XiaoQiang即可，图中未显示。" loading="lazy" />&lt;/p>
&lt;p>看到命令提示符是&lt;code>root@XiaoQiang&lt;/code>即可完成登录。这其实就是Linux下的Shell。&lt;/p>
&lt;h3>生成eeprom备份文件&lt;span class="hx-absolute -hx-mt-20" id="生成eeprom备份文件">&lt;/span>
&lt;a href="#%e7%94%9f%e6%88%90eeprom%e5%a4%87%e4%bb%bd%e6%96%87%e4%bb%b6" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>在MobaXterm的telnet终端窗口键入以下命令并回车。&lt;/p>
&lt;div class="code-block hx-relative hx-mt-6 first:hx-mt-0 group/code">&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">dd &lt;span class="k">if&lt;/span>&lt;span class="o">=&lt;/span>/dev/mtd3 &lt;span class="nv">of&lt;/span>&lt;span class="o">=&lt;/span>/tmp/eeprom.bin&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="code-copy-btn group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>理论上讲，用dd命令可以备份路由器4C的所有分区。&lt;strong>最好把所有分区都备份。&lt;/strong>&lt;/p>
&lt;h2>使用FTP上传Breed，并下载eeprom备份文件&lt;span class="hx-absolute -hx-mt-20" id="使用ftp上传breed并下载eeprom备份文件">&lt;/span>
&lt;a href="#%e4%bd%bf%e7%94%a8ftp%e4%b8%8a%e4%bc%a0breed%e5%b9%b6%e4%b8%8b%e8%bd%bdeeprom%e5%a4%87%e4%bb%bd%e6%96%87%e4%bb%b6" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>在Windows上打开资源管理器，在地址栏输入&lt;a href="ftp://192.168.31.1" >ftp://192.168.31.1&lt;/a>然后回车，路由器4C的文件系统就出现了。&lt;/p>
&lt;div class="hx-overflow-x-auto hx-mt-6 hx-flex hx-rounded-lg hx-border hx-py-2 ltr:hx-pr-4 rtl:hx-pl-4 contrast-more:hx-border-current contrast-more:dark:hx-border-current hx-border-blue-200 hx-bg-blue-100 hx-text-blue-900 dark:hx-border-blue-200/30 dark:hx-bg-blue-900/30 dark:hx-text-blue-200">
&lt;div class="ltr:hx-pl-3 ltr:hx-pr-2 rtl:hx-pr-3 rtl:hx-pl-2">&lt;div class="hx-select-none hx-text-xl" style="font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">
ℹ️
&lt;/div>&lt;/div>
&lt;div class="hx-w-full hx-min-w-0 hx-leading-7">
&lt;div class="hx-mt-6 hx-leading-7 first:hx-mt-0">
FTP服务使用的是游客匿名登录，无需账户和密码，可以直接回车登录。不要使用&lt;code>root&lt;/code>账户登录。
&lt;/div>
&lt;/div>
&lt;/div>
&lt;p>把之前下载的&lt;code>breed-mt7688-reset38.bin&lt;/code>改名为&lt;code>breed.bin&lt;/code>，然后复制到&lt;code>/tmp&lt;/code>目录内备用。&lt;/p>
&lt;p>另外把&lt;code>/tmp&lt;/code>目录下的&lt;code>eeprom.bin&lt;/code>文件下载到本地，做好备份。&lt;/p>
&lt;h2>Breed的刷入与配置&lt;span class="hx-absolute -hx-mt-20" id="breed的刷入与配置">&lt;/span>
&lt;a href="#breed%e7%9a%84%e5%88%b7%e5%85%a5%e4%b8%8e%e9%85%8d%e7%bd%ae" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;h3>刷入Breed&lt;span class="hx-absolute -hx-mt-20" id="刷入breed">&lt;/span>
&lt;a href="#%e5%88%b7%e5%85%a5breed" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>在MobaXterm的telnet终端窗口键入命令，不出现错误提示信息就是成功了。&lt;/p>
&lt;div class="code-block hx-relative hx-mt-6 first:hx-mt-0 group/code">&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">mtd write /tmp/breed.bin Bootloader&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="code-copy-btn group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;h3>进入Breed&lt;span class="hx-absolute -hx-mt-20" id="进入breed">&lt;/span>
&lt;a href="#%e8%bf%9b%e5%85%a5breed" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>
&lt;div class="hx-overflow-x-auto hx-mt-6 hx-flex hx-rounded-lg hx-border hx-py-2 ltr:hx-pr-4 rtl:hx-pl-4 contrast-more:hx-border-current contrast-more:dark:hx-border-current hx-border-yellow-100 hx-bg-yellow-50 hx-text-yellow-900 dark:hx-border-yellow-200/30 dark:hx-bg-yellow-700/30 dark:hx-text-yellow-200">
&lt;div class="ltr:hx-pl-3 ltr:hx-pr-2 rtl:hx-pr-3 rtl:hx-pl-2">&lt;div class="hx-select-none hx-text-xl" style="font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">
⚠️
&lt;/div>&lt;/div>
&lt;div class="hx-w-full hx-min-w-0 hx-leading-7">
&lt;div class="hx-mt-6 hx-leading-7 first:hx-mt-0">
以下步骤务必正确进行。
&lt;/div>
&lt;/div>
&lt;/div>
&lt;p>拔掉路由器4C电源，用牙签按住路由器4C的&lt;code>reset按钮&lt;/code>不松开，插上电源，路由器4C的灯会闪几下，这需要几秒钟，然后松开reset，路由器已进入Breed。&lt;/p>
&lt;p>用网线连接电脑和路由器4C的Lan口（局域网网口，而不是接入外部网络的口），在电脑上用浏览器打开&lt;a href="http://192.168.1.1" target="_blank" rel="noopener">192.168.1.1&lt;/a>就能看到Breed的网页界面了。&lt;/p>
&lt;p>第一次进入Breed，要在Breed里面把前面备份的&lt;code>eeprom.bin&lt;/code>文件刷回去。进Breed-固件更新，里面可以刷eeprom。&lt;/p>
&lt;p>&lt;img src="https://cdn.jsdelivr.net/gh/daaihang/PicGo/202302211537572.png" alt="" loading="lazy" />&lt;/p>
&lt;h2>刷入OpenWrt固件&lt;span class="hx-absolute -hx-mt-20" id="刷入openwrt固件">&lt;/span>
&lt;a href="#%e5%88%b7%e5%85%a5openwrt%e5%9b%ba%e4%bb%b6" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>现在正式开始刷入OpenWrt固件，依次点击固件更新-勾选固件-点击选择文件，选择我们刚刚下载的&lt;code>Mi4C.bin&lt;/code>，然后耐心等待固件刷入完成。&lt;/p>
&lt;p>&lt;img src="https://cdn.jsdelivr.net/gh/daaihang/PicGo/202302211539496.png" alt="" loading="lazy" />&lt;/p>
&lt;p>&lt;img src="https://cdn.jsdelivr.net/gh/daaihang/PicGo/202302211540055.png" alt="" loading="lazy" />&lt;/p>
&lt;p>安装完成后会自动重启，这时可以不断刷新浏览器，直到管理界面显示出来，如果没有显示，建议稍后使用192.168.1.1访问管理页面。&lt;/p>
&lt;p>&lt;img src="https://cdn.jsdelivr.net/gh/daaihang/PicGo/202302211544294.png" alt="" loading="lazy" />&lt;/p>
&lt;div class="hx-overflow-x-auto hx-mt-6 hx-flex hx-rounded-lg hx-border hx-py-2 ltr:hx-pr-4 rtl:hx-pl-4 contrast-more:hx-border-current contrast-more:dark:hx-border-current hx-border-blue-200 hx-bg-blue-100 hx-text-blue-900 dark:hx-border-blue-200/30 dark:hx-bg-blue-900/30 dark:hx-text-blue-200">
&lt;div class="ltr:hx-pl-3 ltr:hx-pr-2 rtl:hx-pr-3 rtl:hx-pl-2">&lt;div class="hx-select-none hx-text-xl" style="font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">
ℹ️
&lt;/div>&lt;/div>
&lt;div class="hx-w-full hx-min-w-0 hx-leading-7">
&lt;div class="hx-mt-6 hx-leading-7 first:hx-mt-0">
&lt;p>账号:&lt;code>root&lt;/code>&lt;/p>
&lt;p>密码:默认没有密码或者默认密码为&lt;code>password&lt;/code>&lt;/p>
&lt;/div>
&lt;/div>
&lt;/div>
&lt;h2>OpenWrt配置&lt;span class="hx-absolute -hx-mt-20" id="openwrt配置">&lt;/span>
&lt;a href="#openwrt%e9%85%8d%e7%bd%ae" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;h3>端口校园网配置&lt;span class="hx-absolute -hx-mt-20" id="端口校园网配置">&lt;/span>
&lt;a href="#%e7%ab%af%e5%8f%a3%e6%a0%a1%e5%9b%ad%e7%bd%91%e9%85%8d%e7%bd%ae" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>选择左侧&lt;strong>网络-接口&lt;/strong>，选择WAN6-编辑。&lt;/p>
&lt;p>&lt;img src="https://cdn.jsdelivr.net/gh/daaihang/PicGo/202302211620750.png" alt="" loading="lazy" />&lt;/p>
&lt;p>协议选择&lt;code>PPPoE&lt;/code>，然后点击出现的 Switch Protocol（切换协议）按钮；PAP/CHAP用户名为学号+&lt;code>@unicom&lt;/code>，例如&lt;code>23338080@unicom&lt;/code>；密码为校园网登陆密码。随后点击&lt;code>保存&lt;/code>，然后点击&lt;code>保存并应用&lt;/code>。&lt;/p>
&lt;p>&lt;img src="https://cdn.jsdelivr.net/gh/daaihang/PicGo/202302211625399.png" alt="image-20230221162500261" loading="lazy" />&lt;/p>
&lt;div class="hx-overflow-x-auto hx-mt-6 hx-flex hx-rounded-lg hx-border hx-py-2 ltr:hx-pr-4 rtl:hx-pl-4 contrast-more:hx-border-current contrast-more:dark:hx-border-current hx-border-yellow-100 hx-bg-yellow-50 hx-text-yellow-900 dark:hx-border-yellow-200/30 dark:hx-bg-yellow-700/30 dark:hx-text-yellow-200">
&lt;div class="ltr:hx-pl-3 ltr:hx-pr-2 rtl:hx-pr-3 rtl:hx-pl-2">&lt;div class="hx-select-none hx-text-xl" style="font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">
⚠️
&lt;/div>&lt;/div>
&lt;div class="hx-w-full hx-min-w-0 hx-leading-7">
&lt;div class="hx-mt-6 hx-leading-7 first:hx-mt-0">
另一个端口&lt;code>WAN&lt;/code>不要进行相同设置，只设置&lt;code>WAN6&lt;/code>即可。因为不能多个“设备”登录同一个校园网账号。
&lt;/div>
&lt;/div>
&lt;/div>
&lt;h3>无线网络设置&lt;span class="hx-absolute -hx-mt-20" id="无线网络设置">&lt;/span>
&lt;a href="#%e6%97%a0%e7%ba%bf%e7%bd%91%e7%bb%9c%e8%ae%be%e7%bd%ae" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>选择左侧&lt;strong>网络-无线&lt;/strong>。如果提示Disabled（已禁用）就点击Enable（启用）。可能只有一个2.4G的，也可能有一个2.4G的、一个5G的。点2.4G或5G的编辑按钮。ESSID填你想要的WiFi名称。&lt;/p>
&lt;p>点击Wireless Security（无线安全）。Encryption（加密）改选为&lt;code>WPA2-PSK&lt;/code>；Key（密码）填你想要的WiFi密码；最后点击&lt;code>保存并应用&lt;/code>。&lt;/p>
&lt;h3>配置Dr.com插件&lt;span class="hx-absolute -hx-mt-20" id="配置drcom插件">&lt;/span>
&lt;a href="#%e9%85%8d%e7%bd%aedrcom%e6%8f%92%e4%bb%b6" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>按下图进行配置。&lt;/p>
&lt;p>点击左侧&lt;strong>网络-接口&lt;/strong>，查看&lt;code>WAN6&lt;/code>的&lt;code>MAC&lt;/code>地址并复制，修改此处Dr.com的&lt;code>MAC拨号&lt;/code>的地址。&lt;/p>
&lt;p>注意，在接口名称中，不一定选择的是&lt;code>eth0.2&lt;/code>，而是选择与&lt;code>WAN6&lt;/code>对应的接口名称，有可能是&lt;code>eth1&lt;/code>，下图提示有误。&lt;/p>
&lt;p>&lt;img src="https://cdn.jsdelivr.net/gh/daaihang/PicGo/202302211706729.png" alt="image-20230221170502631" loading="lazy" />&lt;/p>
&lt;p>在配置保存后，路由器会自动连接。耐心等待后，若可以在页面中看到接发数据，获取到了IP地址，即配置成功。&lt;/p>
&lt;p>&lt;img src="https://cdn.jsdelivr.net/gh/daaihang/PicGo/202302211642791.png" alt="" loading="lazy" />&lt;/p>
&lt;blockquote>
&lt;p>&lt;strong>如果发现路由器一直不能上网，则说明:&lt;/strong>&lt;/p>
&lt;ul>
&lt;li>wan中，学号密码输入错误(可能性30%)；&lt;/li>
&lt;li>drcom插件中，学号密码输入错误(可能性30%)；&lt;/li>
&lt;li>路由器的wan没有与校园网端口连接(可能性20%)；&lt;/li>
&lt;li>网线断了，或者路由器坏了(可能性15%)；&lt;/li>
&lt;li>压根没开通校园网(可能性4.9%)；&lt;/li>
&lt;li>端口被学校网络中心拉黑了(极少出现0.1%)。&lt;/li>
&lt;/ul>
&lt;/blockquote>
&lt;h3>（可选操作）配置防检测&lt;span class="hx-absolute -hx-mt-20" id="可选操作配置防检测">&lt;/span>
&lt;a href="#%e5%8f%af%e9%80%89%e6%93%8d%e4%bd%9c%e9%85%8d%e7%bd%ae%e9%98%b2%e6%a3%80%e6%b5%8b" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h3>&lt;p>具体看这里：&lt;a href="https://github.com/shengqiangzhang/Drcom-GDUT-HC5661A-OpenWrt#%e6%ad%a5%e9%aa%a4%e5%85%ad%e9%85%8d%e7%bd%ae%e9%98%b2%e6%a3%80%e6%b5%8b" target="_blank" rel="noopener">shengqiangzhang/Drcom-GDUT-HC5661A-OpenWrt (github.com)&lt;/a>&lt;/p>
&lt;h2>大功告成&lt;span class="hx-absolute -hx-mt-20" id="大功告成">&lt;/span>
&lt;a href="#%e5%a4%a7%e5%8a%9f%e5%91%8a%e6%88%90" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>🎉至此已经可以上网了！开始享受无线设备数量限制的快乐吧！&lt;/p>
&lt;p>本教程大体还是参照Github项目&lt;a href="https://github.com/shengqiangzhang/Drcom-GDUT-HC5661A-OpenWrt" target="_blank" rel="noopener">Drcom-GDUT-HC5661A-OpenWrt&lt;/a>进行配置。其他路由器可参照该项目。&lt;/p>
&lt;div class="hx-overflow-x-auto hx-mt-6 hx-flex hx-rounded-lg hx-border hx-py-2 ltr:hx-pr-4 rtl:hx-pl-4 contrast-more:hx-border-current contrast-more:dark:hx-border-current hx-border-yellow-100 hx-bg-yellow-50 hx-text-yellow-900 dark:hx-border-yellow-200/30 dark:hx-bg-yellow-700/30 dark:hx-text-yellow-200">
&lt;div class="ltr:hx-pl-3 ltr:hx-pr-2 rtl:hx-pr-3 rtl:hx-pl-2">&lt;div class="hx-select-none hx-text-xl" style="font-family: 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol';">
⚠️
&lt;/div>&lt;/div>
&lt;div class="hx-w-full hx-min-w-0 hx-leading-7">
&lt;div class="hx-mt-6 hx-leading-7 first:hx-mt-0">
本教程仅供学习，请在成功刷入OpenWrt后正确使用系统，并在学习后24小时内删除相关固件和（或）软件包。
&lt;/div>
&lt;/div>
&lt;/div></description></item><item><title>GZCTF 搭建部署笔记（Docker）</title><link>https://wdh.hk/docs/gzctf-build/</link><pubDate>Sun, 10 Mar 2024 21:57:38 +0800</pubDate><guid>https://wdh.hk/docs/gzctf-build/</guid><description>
&lt;blockquote>
&lt;p>Github: &lt;a href="https://github.com/GZTimeWalker/GZCTF" target="_blank" rel="noopener">GZTimeWalker/GZCTF&lt;/a>&lt;/p>
&lt;p>部署方式：Docker-compose（GZCTF、数据库、题目容器均在同一Docker实例中）&lt;/p>
&lt;p>系统：Ubuntu20.04-Docker20（因此默认系统已经安装了Docker和Docker Compose）&lt;/p>
&lt;/blockquote>
&lt;h2>将当前用户加入 docker 组&lt;span class="hx-absolute -hx-mt-20" id="将当前用户加入-docker-组">&lt;/span>
&lt;a href="#%e5%b0%86%e5%bd%93%e5%89%8d%e7%94%a8%e6%88%b7%e5%8a%a0%e5%85%a5-docker-%e7%bb%84" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>若出现下面的报错才需配置。&lt;/p>
&lt;div class="code-block hx-relative hx-mt-6 first:hx-mt-0 group/code">&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="o">[&lt;/span>xxxx@xxxx ~&lt;span class="o">]&lt;/span>$ docker ps
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">Got permission denied &lt;span class="k">while&lt;/span> trying to connect to the Docker daemon socket at unix:///var/run/docker.sock: Get &lt;span class="s2">&amp;#34;http://%2Fvar%2Frun%2Fdocker.sock/v1.24/containers/json&amp;#34;&lt;/span>: dial unix /var/run/docker.sock: connect: permission denied&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="code-copy-btn group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>问题出在用户为访问 &lt;code>/var/run/docker.sock&lt;/code> 的权限，只需给用户增加权限即可。命令行输入：&lt;/p>
&lt;div class="code-block hx-relative hx-mt-6 first:hx-mt-0 group/code">&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">sudo chown root:docker /var/run/docker.sock &lt;span class="c1"># 修改docker.sock权限为root:docker&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo groupadd docker &lt;span class="c1"># 添加docker用户组 &lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">sudo gpasswd -a &lt;span class="nv">$USER&lt;/span> docker &lt;span class="c1"># 将当前用户添加至docker用户组&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">newgrp docker &lt;span class="c1"># 更新docker用户组&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="code-copy-btn group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;h2>配置文件&lt;span class="hx-absolute -hx-mt-20" id="配置文件">&lt;/span>
&lt;a href="#%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>新建两个文件，位于同一个文件夹。这里的文件夹名称为 &lt;code>GZCTF&lt;/code>，文件为 &lt;code>appsettings.json&lt;/code> 和 &lt;code>docker-compose.yml&lt;/code> 。&lt;/p>
&lt;p>&lt;code>appsettings.json&lt;/code> 文件内写入：&lt;/p>
&lt;div class="code-block hx-relative hx-mt-6 first:hx-mt-0 group/code">&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-json" data-lang="json">&lt;span class="line">&lt;span class="cl">&lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;AllowedHosts&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;*&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;ConnectionStrings&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;Database&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Host=db:5432;Database=gzctf;Username=postgres;Password=&amp;lt;String1&amp;gt;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">//&amp;lt;String1&amp;gt;换成数据库密码，随机密码且长度足够
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;Logging&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;LogLevel&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;Default&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Information&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;Microsoft&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Warning&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;Microsoft.Hosting.Lifetime&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Information&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">//邮箱配置
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;EmailConfig&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;SendMailAddress&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Admin@xxx.com&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// 填入邮箱
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;UserName&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;ctf_noreply&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// 发件人名称
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;Password&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;******&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// 邮箱密码，部分服务商需要填入授权码
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;Smtp&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;Host&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;smtp.163.com&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// 此处为163邮箱服务器，具体自定
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;Port&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="mi">465&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;XorKey&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;lt;String2&amp;gt;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// 自定XorKey
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;ContainerProvider&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;Type&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;Docker&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;PublicEntry&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;xx.xx.xx.xx&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span> &lt;span class="c1">// 域名或IP配置，用于容器生成,域名不带http/https
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;DockerConfig&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;SwarmMode&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;Uri&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span> &lt;span class="c1">// 本地配置Docker因此此处置空
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;RequestLogging&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;DisableRateLimit&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="kc">false&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;RegistryConfig&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;UserName&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;Password&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;ServerAddress&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">},&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="c1">//谷歌验证码配置
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="c1">&lt;/span> &lt;span class="nt">&amp;#34;GoogleRecaptcha&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="p">{&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;VerifyAPIAddress&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;https://www.recaptcha.net/recaptcha/api/siteverify&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;Sitekey&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;Secretkey&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;&amp;#34;&lt;/span>&lt;span class="p">,&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="nt">&amp;#34;RecaptchaThreshold&amp;#34;&lt;/span>&lt;span class="p">:&lt;/span> &lt;span class="s2">&amp;#34;0.5&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl"> &lt;span class="p">}&lt;/span>
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="p">}&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="code-copy-btn group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>&lt;code>docker-compose.yml&lt;/code> 写入：&lt;/p>
&lt;div class="code-block hx-relative hx-mt-6 first:hx-mt-0 group/code">&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-yml" data-lang="yml">&lt;span class="line">&lt;span class="cl">&lt;span class="nt">version&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="s1">&amp;#39;3.0&amp;#39;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">services&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">gzctf&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">gztime/gzctf:latest&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restart&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">always&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">environment&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;GZCTF_ADMIN_PASSWORD=&amp;lt;String3&amp;gt;&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># &amp;lt;String3&amp;gt;换成管理员账户密码，账号为Admin&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ports&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;80:8080&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># 对外端口号，前为外部端口。&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">networks&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">default&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;./data/files:/app/uploads&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;./appsettings.json:/app/appsettings.json:ro&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;./logs:/app/log&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;./data/keys:/root/.aspnet/DataProtection-Keys&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="c"># - &amp;#34;./k8sconfig.yaml:/app/k8sconfig.yaml:ro&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;/var/run/docker.sock:/var/run/docker.sock&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">depends_on&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="l">db&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">db&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">image&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">postgres:alpine&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">restart&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">always&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">environment&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;POSTGRES_PASSWORD=&amp;lt;String1&amp;gt;&amp;#34;&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="c"># 数据库密码，务必要和appsettings.json中的配置一致&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">networks&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">default&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">volumes&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="s2">&amp;#34;./data/db:/var/lib/postgresql/data&amp;#34;&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w">&lt;/span>&lt;span class="nt">networks&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">default&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">driver&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="l">bridge&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">ipam&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>&lt;span class="nt">config&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w">
&lt;/span>&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">&lt;span class="w"> &lt;/span>- &lt;span class="nt">subnet&lt;/span>&lt;span class="p">:&lt;/span>&lt;span class="w"> &lt;/span>&lt;span class="m">192.168.12.0&lt;/span>&lt;span class="l">/24&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="code-copy-btn group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;h2>命令行&lt;span class="hx-absolute -hx-mt-20" id="命令行">&lt;/span>
&lt;a href="#%e5%91%bd%e4%bb%a4%e8%a1%8c" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>通过 Xshell 和 Xftp 连接服务器，上传 &lt;code>GZCTF&lt;/code> 文件夹。开始部署。&lt;/p>
&lt;div class="code-block hx-relative hx-mt-6 first:hx-mt-0 group/code">&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">&lt;span class="nb">cd&lt;/span> GZCTF
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">docker-compose up -d&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="code-copy-btn group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>部署完成后，建议查看 log，看部署是否成功。主要是看 gzctf 容器是否连接上了数据库。&lt;/p>
&lt;p>&lt;code>docker ps&lt;/code> 查看容器 ID：&lt;/p>
&lt;div class="code-block hx-relative hx-mt-6 first:hx-mt-0 group/code">&lt;div>&lt;div class="highlight">&lt;pre tabindex="0" class="chroma">&lt;code class="language-shell" data-lang="shell">&lt;span class="line">&lt;span class="cl">ubuntu@VM-16-8-ubuntu:~$ docker ps
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">5b9bc7a475h2 gztime/gzctf:latest &lt;span class="s2">&amp;#34;dotnet CTFServer.dll&amp;#34;&lt;/span> &lt;span class="m">17&lt;/span> hours ago Up &lt;span class="m">17&lt;/span> hours 0.0.0.0:80-&amp;gt;8080/tcp gzctf_gzctf_1
&lt;/span>&lt;/span>&lt;span class="line">&lt;span class="cl">f00e8850dee4 postgres:alpine &lt;span class="s2">&amp;#34;docker-entrypoint.s…&amp;#34;&lt;/span> &lt;span class="m">17&lt;/span> hours ago Up &lt;span class="m">17&lt;/span> hours 5432/tcp gzctf_db_1&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;/div>&lt;div class="hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="code-copy-btn group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>看到 gzctf 的 ID 是 &lt;code>5b9bc7a475h2&lt;/code>。使用 &lt;code>docker logs 5b9bc7a475h2&lt;/code> 查看日志。看到连接上数据库的日志即可成功配置。&lt;/p>
&lt;h2>平台测试&lt;span class="hx-absolute -hx-mt-20" id="平台测试">&lt;/span>
&lt;a href="#%e5%b9%b3%e5%8f%b0%e6%b5%8b%e8%af%95" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;p>登录域名或 IP（域名需要在域名服务商配置）。用 Admin 和前面设置的密码登录。（中间就自己添加比赛什么的）然后添加需要容器的题目，并测试几个 Web 容器。&lt;/p>
&lt;p>&lt;img src="http://picgo-1258675557.cos.accelerate.myqcloud.com/202304011351351.png" alt="" loading="lazy" />&lt;/p>
&lt;p>可以测试的 Docker Hub 镜像如下。这些镜像本身部署是没有问题的。若出现错误就是平台配置问题了。服务端口均为 80。&lt;/p>
&lt;div class="code-block hx-relative hx-mt-6 first:hx-mt-0 group/code">&lt;pre>&lt;code>vaalacat/push_f12
glzjin/hctf_2018_warmup
ctftraining/hbctf_2017_dameixian
ctftraining/qwb_2019_smarthacker
ctftraining/buuctf_2018_online_tool
ctftraining/qwb_2019_upload
ctftraining/qwb_2019_supersqli&lt;/code>&lt;/pre>&lt;div class="hx-opacity-0 hx-transition group-hover/code:hx-opacity-100 hx-flex hx-gap-1 hx-absolute hx-m-[11px] hx-right-0 hx-top-0">
&lt;button
class="code-copy-btn group/copybtn hx-transition-all active:hx-opacity-50 hx-bg-primary-700/5 hx-border hx-border-black/5 hx-text-gray-600 hover:hx-text-gray-900 hx-rounded-md hx-p-1.5 dark:hx-bg-primary-300/10 dark:hx-border-white/10 dark:hx-text-gray-400 dark:hover:hx-text-gray-50"
title="Copy code"
>
&lt;div class="copy-icon group-[.copied]/copybtn:hx-hidden hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;div class="success-icon hx-hidden group-[.copied]/copybtn:hx-block hx-pointer-events-none hx-h-4 hx-w-4">&lt;/div>
&lt;/button>
&lt;/div>
&lt;/div>
&lt;p>需要注意的是，&lt;strong>部分镜像需要内存和存储较多，可能出现创建容器成功但无法打开网页的情况&lt;/strong>。&lt;/p>
&lt;h2>容器其他错误排查&lt;span class="hx-absolute -hx-mt-20" id="容器其他错误排查">&lt;/span>
&lt;a href="#%e5%ae%b9%e5%99%a8%e5%85%b6%e4%bb%96%e9%94%99%e8%af%af%e6%8e%92%e6%9f%a5" class="subheading-anchor" aria-label="Permalink for this section">&lt;/a>&lt;/h2>&lt;ul>
&lt;li>
&lt;p>部署报错：&lt;/p>
&lt;ul>
&lt;li>&lt;strong>不会两个文件内容改都不改吧？&lt;/strong>&lt;/li>
&lt;li>检查 pip 版本，检查 Docker 版本。&lt;/li>
&lt;/ul>
&lt;/li>
&lt;li>
&lt;p>容器无法创建：数据库是否连上？看前面的配置和使用 &lt;code>docker logs xxx&lt;/code> 命令查看日志。&lt;/p>
&lt;/li>
&lt;li>
&lt;p>容器创建成功但无法打开网页：&lt;/p>
&lt;ul>
&lt;li>
&lt;p>域名访问：服务商的域名配置是否正确？&lt;/p>
&lt;/li>
&lt;li>
&lt;p>内存限制和存储限制是否太小？&lt;/p>
&lt;/li>
&lt;li>
&lt;p>服务器的防火墙端口是否打开了？&lt;/p>
&lt;/li>
&lt;/ul>
&lt;/li>
&lt;/ul></description></item></channel></rss>